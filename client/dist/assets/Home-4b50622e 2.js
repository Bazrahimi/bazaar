import{r as d,j as o}from"./index-7df5b2c6.js";import{u as i,G as P,M as h}from"./queries-8c77c0ea.js";import{P as l}from"./ProductGrid-7cf1a28d.js";import{T as p}from"./chunk-2OOHT3W5-e29e2160.js";import{n as j}from"./navigateToProductDetails-4801012d.js";import{B as u}from"./chunk-PULVB27S-12838285.js";import{B as g}from"./chunk-UVUR7MCU-e2c58d54.js";import"./ApolloContext-0423ced6.js";import"./index-bcc7c8d0.js";import"./networkStatus-e971fe23.js";import"./chunk-G72KV6MB-93e738e8.js";import"./chunk-57I6FYPZ-76f28c40.js";import"./chunk-QINAG4RG-4be5ab80.js";const S=({handleDataFetch:r})=>{const{loading:e,error:s,data:t}=i(P);return d.useEffect(()=>{if(t&&t.getLatestProducts){const{products:n,totalProductsCount:c}=t.getLatestProducts;r({products:n,totalProductsCount:c})}},[t,r]),e?o.jsx("p",{children:"Loading..."}):s?o.jsxs("p",{children:["Error: ",s.message]}):null},L=({onClick:r})=>{const{loading:e,error:s,data:t}=i(h),[n,c]=d.useState([]);return d.useEffect(()=>{if(t&&t.MostViewedProducts){const{products:a}=t.MostViewedProducts;c(a),c(a.slice(0,8))}},[t]),e?o.jsx("p",{children:"Loading..."}):s?o.jsxs("p",{children:["Error: ",s.message]}):o.jsxs("div",{children:[o.jsx(p,{mt:6,mb:1,fontSize:"35px",fontWeight:"bold",textAlign:"center",children:"Popular Products"}),o.jsx(l,{products:n,showViewCount:!0,onClick:r})]})},T=(r=8,e=0)=>{const[s,t]=d.useState(r),n=()=>{s+r>e?t(e):t(s+r)},c=s<e;return[s,n,c]},O=()=>{const r=j(),[e,s]=d.useState({products:[],totalProductsCount:0}),{products:t,totalProductsCount:n}=e,[c,a,m]=T(8,n),f=d.useCallback(x=>{s(x)},[]);return o.jsxs(u,{children:[o.jsx(S,{handleDataFetch:f}),o.jsx(p,{mt:6,mb:1,fontSize:"35px",fontWeight:"bold",textAlign:"center",children:"Latest Products"}),o.jsx(l,{products:t.slice(0,c),onClick:r}),o.jsxs(u,{display:"flex",flexDirection:"column",justifyContent:"space-between",children:[m&&o.jsx(g,{mr:10,mb:10,mt:20,alignSelf:"flex-end",onClick:a,children:"More Latest Products..."}),o.jsx(L,{onClick:r})]})]})};export{O as default};
